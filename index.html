<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enquete de Feridas na Alma</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { background: linear-gradient(135deg, #c084fc, #7c3aed); }
        .option { transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .option:hover { transform: scale(1.05); background-color: #fef3c7; }
        .option.selected { background: linear-gradient(135deg, #34d399, #059669); color: white; }
        .fill { transition: width 1s ease-in-out; border-radius: 9999px; }
        .fill::after { content: attr(data-percent); position: absolute; right: 8px; top: 50%; transform: translateY(-50%); color: white; font-weight: bold; font-size: 14px; }
        .btn-primary { background: linear-gradient(135deg, #a855f7, #7c3aed); animation: pulse 2s infinite; }
        .btn-primary:hover { background: linear-gradient(135deg, #7c3aed, #a855f7); }
        .btn-start { background: linear-gradient(135deg, #ec4899, #be185d); }
        .btn-start:hover { background: linear-gradient(135deg, #be185d, #ec4899); }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .signature { font-family: 'Dancing Script', cursive; color: #ec4899; }
        .tips-highlight { animation: tipsPulse 2s infinite alternate; box-shadow: 0 0 20px rgba(168, 85, 247, 0.8); border: 2px solid #a855f7; border-radius: 12px; }
        @keyframes tipsPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen flex items-center justify-center p-4">
<div class="max-w-3xl w-full bg-white rounded-2xl shadow-2xl p-6 sm:p-8">
    <h2 class="text-3xl sm:text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">Cura Interior</h2>
    <h1 class="text-4xl sm:text-5xl font-extrabold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-600 to-purple-600 mb-4">
        Enquete: Poss√≠veis Sinais de Feridas na Alma
    </h1>
    <p class="text-center text-gray-700 mb-6 text-lg">Descubra o grau de feridas emocionais que podem estar limitando sua vida</p>

    <!-- FORMUL√ÅRIO INICIAL -->
    <div id="form-section">
        <div class="bg-gradient-to-r from-purple-100 to-pink-100 p-6 rounded-lg mb-6 shadow-md">
            <p class="text-xl font-semibold text-gray-800 mb-4">Seus Dados</p>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                <input type="text" id="name" placeholder="Nome" class="border border-purple-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-purple-500">
                <input type="number" id="age" placeholder="Idade" class="border border-purple-300 rounded-lg p-3 w-full focus:ring-2 focus:ring-purple-500">
            </div>
            <input type="email" id="email" placeholder="E-mail" class="border border-purple-300 rounded-lg p-3 w-full mb-6 focus:ring-2 focus:ring-purple-500">
            
            <div class="tips-highlight p-6 rounded-lg mb-6">
                <p class="text-xl font-bold text-purple-800 mb-3">‚ö° Dicas para sinceridade total:</p>
                <ul class="list-disc list-inside text-purple-700 space-y-2">
                    <li>Responda pensando em quem voc√™ √â hoje, n√£o em quem gostaria de ser.</li>
                    <li>N√£o tenha vergonha: Deus j√° sabe tudo e quer te curar.</li>
                    <li>A primeira resposta que vier √† mente √© a mais verdadeira.</li>
                </ul>
            </div>
            <div class="text-center">
                <button onclick="startTest()" class="btn-start text-white px-8 py-4 rounded-xl text-xl font-bold shadow-lg">COME√áAR AGORA</button>
            </div>
        </div>
    </div>

    <!-- TESTE -->
    <div id="test-section" class="hidden">
        <div class="text-center mb-6">
            <p class="text-5xl font-bold text-purple-700" id="progress">1 / 22</p>
            <div class="w-full bg-gray-200 rounded-full h-4 mt-3">
                <div id="progressBar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-4 rounded-full" style="width: 4.5%"></div>
            </div>
        </div>

        <div id="questions">
            <!-- 22 PERGUNTAS BASEADAS NOS SINTOMAS -->
            <div class="question active bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-xl shadow-lg" data-q="1">
                <h3 class="text-2xl font-bold text-purple-800 mb-6 text-center">1. Eu vivo amea√ßando ou chateando os outros quando n√£o fa√ßo minha vontade?</h3>
                <div class="grid grid-cols-1 gap-4">
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q1" value="0" class="hidden"><label class="block text-lg">(a) Nunca</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q1" value="1" class="hidden"><label class="block text-lg">(b) Raramente</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q1" value="2" class="hidden"><label class="block text-lg">(c) √Äs vezes</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q1" value="3" class="hidden"><label class="block text-lg">(d) Frequentemente</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q1" value="4" class="hidden"><label class="block text-lg">(e) Sempre</label></div>
                </div>
                <div class="text-right mt-6"><button onclick="nextQuestion(1)" class="btn-primary text-white px-6 py-3 rounded-lg">Pr√≥xima ‚ûú</button></div>
            </div>

            <!-- As outras 21 perguntas seguem o mesmo padr√£o -->
            <!-- Pergunta 2 -->
            <div class="question hidden bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-xl shadow-lg" data-q="2">
                <h3 class="text-2xl font-bold text-purple-800 mb-6 text-center">2. Eu me sinto confuso(a) sobre quem eu sou ou o que quero da vida?</h3>
                <div class="grid grid-cols-1 gap-4">
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q2" value="0" class="hidden"><label>(a) Nunca</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q2" value="1" class="hidden"><label>(b) Raramente</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q2" value="2" class="hidden"><label>(c) √Äs vezes</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q2" value="3" class="hidden"><label>(d) Frequentemente</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q2" value="4" class="hidden"><label>(e) Sempre</label></div>
                </div>
                <div class="flex justify-between mt-6">
                    <button onclick="prevQuestion(2)" class="text-purple-600 font-bold">‚Üê Anterior</button>
                    <button onclick="nextQuestion(2)" class="btn-primary text-white px-6 py-3 rounded-lg">Pr√≥xima ‚ûú</button>
                </div>
            </div>

            <!-- ... (perguntas 3 a 22 seguem o mesmo padr√£o com os sintomas listados) ... -->
            <!-- Para brevidade, aqui vai s√≥ mais uma como exemplo -->
            <div class="question hidden bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-xl shadow-lg" data-q="22">
                <h3 class="text-2xl font-bold text-purple-800 mb-6 text-center">22. Eu tenho comportamentos sexuais compulsivos (masturba√ß√£o, pornografia, etc.)?</h3>
                <div class="grid grid-cols-1 gap-4">
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q22" value="0" class="hidden"><label>(a) Nunca</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q22" value="1" class="hidden"><label>(b) Raramente</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q22" value="2" class="hidden"><label>(c) √Äs vezes</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q22" value="3" class="hidden"><label>(d) Frequentemente</label></div>
                    <div class="option p-4 rounded-lg cursor-pointer"><input type="radio" name="q22" value="4" class="hidden"><label>(e) Sempre</label></div>
                </div>
                <div class="flex justify-between mt-6">
                    <button onclick="prevQuestion(22)" class="text-purple-600 font-bold">‚Üê Anterior</button>
                    <button onclick="showResult()" class="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-4 rounded-xl font-bold text-xl">VER MEU GRAU DE FERIDAS</button>
                </div>
            </div>
        </div>
    </div>

    <!-- RESULTADO -->
    <div id="result" class="hidden">
        <h2 class="text-4xl font-extrabold text-center text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-8">
            Seu Grau de Feridas na Alma
        </h2>

        <div class="bg-gradient-to-r from-purple-100 to-pink-100 p-8 rounded-2xl shadow-xl mb-8">
            <p class="text-6xl font-bold text-center text-purple-800" id="finalScore">0%</p>
            <p class="text-2xl text-center mt-4" id="interpretation"></p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-2xl font-bold text-purple-700 mb-4">ü©π N√≠vel Detectado</h3>
                <ul class="space-y-3 text-gray-700" id="symptomList"></ul>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-2xl font-bold text-pink-700 mb-4">üïäÔ∏è Ora√ß√£o de Cura</h3>
                <p class="text-gray-700 leading-relaxed">
                    "Jesus, Tu foste mo√≠do pelas minhas feridas. Eu entrego toda dor, medo, culpa e vergonha. 
                    Sara minha alma agora. Enche-me com Tua paz que excede todo entendimento. Am√©m!"
                </p>
            </div>
        </div>

        <div class="text-center">
            <button onclick="generatePDF()" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-10 py-5 rounded-full text-2xl font-bold shadow-2xl hover:shadow-purple-500/50">
                üì• Baixar Relat√≥rio + Ora√ß√£o
            </button>
        </div>

        <p class="text-center mt-10 text-3xl signature">Pr. Rog√©rio Braga - Cura Interior</p>
    </div>
</div>

<script>
    let currentQ = 1;
    const totalQ = 22;
    const symptoms = [
        "Vive amea√ßando ou chateando os outros",
        "Se sente confuso(a) sobre identidade",
        "N√£o admite erros",
        "Sente prazer no infort√∫nio alheio",
        "Desqualifica o sucesso dos outros",
        "N√£o tem sonhos ou aspira√ß√µes",
        "Vive desconfiado de todos",
        "√â extremamente ciumento(a)",
        "Vive triste sem motivo aparente",
        "√â t√≠mido(a) ao extremo",
        "√â risonho(a) demais (m√°scara)",
        "Tem dinheiro mas n√£o usufrui",
        "Gasta o que n√£o tem",
        "Vive sob ang√∫stia constante",
        "N√£o tem vontade de fazer nada",
        "Acha que o mundo est√° contra si",
        "Tem pesadelos frequentes",
        "N√£o sente prazer sexual no casamento",
        "Tem comportamentos sexuais compulsivos",
        "Sente nojo ou raiva ao lembrar do passado",
        "Evita certos lugares ou pessoas por medo",
        "Sente vergonha profunda de si mesmo(a)"
    ];

    function startTest() {
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        if (name && email) {
            document.getElementById('form-section').classList.add('hidden');
            document.getElementById('test-section').classList.remove('hidden');
        } else {
            alert('Por favor, preencha nome e e-mail');
        }
    }

    function nextQuestion(q) {
        if (!document.querySelector(`input[name="q${q}"]:checked`)) {
            alert('Escolha uma op√ß√£o antes de continuar');
            return;
        }
        document.querySelector(`[data-q="${q}"]`).classList.add('hidden');
        currentQ++;
        document.getElementById('progress').textContent = currentQ + ' / 22';
        document.getElementById('progressBar').style.width = (currentQ / totalQ * 100) + '%';
        if (currentQ <= totalQ) {
            document.querySelector(`[data-q="${currentQ}"]`).classList.remove('hidden');
        }
    }

    function prevQuestion(q) {
        document.querySelector(`[data-q="${q}"]`).classList.add('hidden');
        currentQ--;
        document.getElementById('progress').textContent = currentQ + ' / 22';
        document.getElementById('progressBar').style.width = (currentQ / totalQ * 100) + '%';
        document.querySelector(`[data-q="${currentQ}"]`).classList.remove('hidden');
    }

    function showResult() {
        let total = 0;
        for (let i = 1; i <= totalQ; i++) {
            const val = parseInt(document.querySelector(`input[name="q${i}"]:checked`).value);
            total += val;
        }
        const percent = Math.round((total / (4 * totalQ)) * 100);

        document.getElementById('test-section').classList.add('hidden');
        document.getElementById('result').classList.remove('hidden');
        document.getElementById('finalScore').textContent = percent + '%';

        let level = '';
        let color = '';
        if (percent <= 20) { level = 'Feridas leves ‚Äì Voc√™ est√° quase curado(a)!'; color = 'text-green-600'; }
        else if (percent <= 50) { level = 'Feridas moderadas ‚Äì Deus quer te curar hoje!'; color = 'text-yellow-600'; }
        else if (percent <= 75) { level = 'Feridas profundas ‚Äì √â hora de deixar Jesus entrar!'; color = 'text-orange-600'; }
        else { level = 'Feridas graves ‚Äì Jesus est√° batendo √† porta da sua alma!'; color = 'text-red-600'; }

        document.getElementById('interpretation').innerHTML = `<span class="${color}">${level}</span>`;

        // Lista personalizada
        const list = document.getElementById('symptomList');
        list.innerHTML = '';
        for (let i = 1; i <= totalQ; i++) {
            const val = parseInt(document.querySelector(`input[name="q${i}"]:checked`).value);
            if (val >= 3) {
                const li = document.createElement('li');
                li.className = 'font-semibold text-purple-700';
                li.innerHTML = `‚ö†Ô∏è ${symptoms[i-1]}`;
                list.appendChild(li);
            }
        }
    }

    async function generatePDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const name = document.getElementById('name').value;
        let y = 20;

        doc.setFontSize(18);
        doc.text('RELAT√ìRIO DE FERIDAS NA ALMA', 105, y, { align: 'center' });
        y += 15;
        doc.setFontSize(12);
        doc.text(`Nome: ${name}`, 20, y);
        y += 10;
        doc.text(`Grau de Feridas: ${document.getElementById('finalScore').textContent}`, 20, y);
        y += 15;

        doc.setFontSize(14);
        doc.text('SINTOMAS DETECTADOS:', 20, y);
        y += 10;
        doc.setFontSize(10);
        document.querySelectorAll('#symptomList li').forEach(item => {
            doc.text(item.textContent, 25, y);
            y += 7;
        });

        y += 15;
        doc.setFontSize(14);
        doc.text('ORA√á√ÉO DE CURA', 20, y);
        y += 10;
        doc.setFontSize(11);
        const prayer = "Jesus, Tu foste mo√≠do pelas minhas feridas. Eu entrego toda dor, medo, culpa e vergonha. Sara minha alma agora. Enche-me com Tua paz que excede todo entendimento. Am√©m!";
        doc.text(prayer.split('. ').join('.\n'), 20, y, { maxWidth: 170 });

        doc.save(`feridas_alma_${name.split(' ')[0]}.pdf`);
        alert('‚úÖ Relat√≥rio baixado com sucesso!');
    }

    // Sele√ß√£o visual
    document.querySelectorAll('.option').forEach(opt => {
        opt.addEventListener('click', () => {
            const radio = opt.querySelector('input');
            radio.checked = true;
            opt.parentElement.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
            opt.classList.add('selected');
        });
    });
</script>
</body>
</html>
